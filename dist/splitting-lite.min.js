!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Splitting=e()}(this,(function(){"use strict"
let t=document,e=t.createTextNode.bind(t)
function n(t,e,n){t.style.setProperty(e,n)}function i(t,e){return t.appendChild(e)}function r(e,n,r,u){let o=t.createElement("span")
return n&&(o.className=n),r&&(!u&&o.setAttribute("data-"+n,r),o.textContent=r),e&&i(e,o)||o}function u(t,e){return t&&0!=t.length?t.nodeName?[t]:[].slice.call(t[0].nodeName?t:document.querySelectorAll(t)):[]}function o(t,e){t&&t.some(e)}function l(t){return function(e){return t[e]}}let c={}
function s(t,e,n){let i=n.indexOf(t)
if(-1==i){n.unshift(t)
let e=c[t]
if(!e)throw new Error("plugin not loaded: "+t)
o(e.depends,(function(e){s(e,t,n)}))}else{let r=n.indexOf(e)
n.splice(i,1),n.splice(r,0,t)}return n}function f(t,e,n,i){return{by:t,depends:e,key:n,split:i}}function d(t){return s(t,0,[]).map(l(c))}function a(t){c[t.by]=t}function p(t,n,l,c,s){t.normalize()
let f=[],d=document.createDocumentFragment()
c&&f.push(t.previousSibling)
let a=[]
return u(t.childNodes).some((function(t){if(t.tagName&&!t.hasChildNodes())return void a.push(t)
if(t.childNodes&&t.childNodes.length)return a.push(t),void f.push.apply(f,p(t,n,l,c,s))
let i=t.wholeText||"",u=i.trim()
u.length&&(" "===i[0]&&a.push(e(" ")),o(u.split(l),(function(t,e){e&&s&&a.push(r(d,"whitespace"," ",s))
let i=r(d,n,t)
f.push(i),a.push(i)}))," "===i[i.length-1]&&a.push(e(" ")))})),o(a,(function(t){i(d,t)})),t.innerHTML="",i(t,d),f}let h="words",m=f(h,0,"word",(function(t){return p(t,"word",/\s+/,0,1)})),g="chars",y=f(g,[h],"char",(function(t,e,n){let i=[]
return o(n[h],(function(t,n){i.push.apply(i,p(t,"char","",e.whitespace&&n))})),i}))
function b(t){let e=(t=t||{}).key
return u(t.target||"[data-splitting]").map((function(i){let r=i["üçå"]
if(!t.force&&r)return r
r=i["üçå"]={el:i}
let u=t.by||function(t,e){return t.getAttribute("data-"+e)}(i,"splitting")
u&&"true"!=u||(u=g)
let l=d(u),c=function(t,e){for(let n in e)t[n]=e[n]
return t}({},t)
return o(l,(function(t){if(t.split){let u=t.by,l=(e?"-"+e:"")+t.key,s=t.split(i,c,r)
l&&function(t,e,i){let r="--"+e,u=r+"-index"
o(i,(function(t,e){Array.isArray(t)?o(t,(function(t){n(t,u,e)})):n(t,u,e)})),n(t,r+"-total",i.length)}(i,l,s),r[u]=s,i.classList.add(u)}})),i.classList.add("splitting"),r}))}function N(t,e){return t-e}b.html=function(t){let e=(t=t||{}).target=r()
return e.innerHTML=t.content,b(t),e.outerHTML},b.add=a
let w=f("lines",[h],"line",(function(t,e,n){return function(t,e,n){let i=u(e.matching||t.children),r={}
return o(i,(function(t){let e=Math.round(t[n]);(r[e]||(r[e]=[])).push(t)})),Object.keys(r).map(Number).sort(N).map(l(r))}(t,{matching:n[h]},"offsetTop")}))
return a(m),a(y),a(w),b}))
