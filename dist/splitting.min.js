!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Splitting=e()}(this,(function(){"use strict"
let t=document,e=t.createTextNode.bind(t)
function n(t,e,n){t.style.setProperty(e,n)}function r(t,e){return t.appendChild(e)}function i(e,n,i,o){let u=t.createElement("span")
return n&&(u.className=n),i&&(!o&&u.setAttribute("data-"+n,i),u.textContent=i),e&&r(e,u)||u}function o(t,e){return t.getAttribute("data-"+e)}function u(t,e){return t&&0!=t.length?t.nodeName?[t]:[].slice.call(t[0].nodeName?t:(e||document).querySelectorAll(t)):[]}function l(t){let e=[]
for(;t--;)e[t]=[]
return e}function c(t,e){t&&t.some(e)}function s(t){return function(e){return t[e]}}let f={}
function a(t,e,n){let r=n.indexOf(t)
if(-1==r){n.unshift(t)
let e=f[t]
if(!e)throw new Error("plugin not loaded: "+t)
c(e.depends,(function(e){a(e,t,n)}))}else{let i=n.indexOf(e)
n.splice(r,1),n.splice(i,0,t)}return n}function d(t,e,n,r){return{by:t,depends:e,key:n,split:r}}function p(t){return a(t,0,[]).map(s(f))}function h(t){f[t.by]=t}function m(t,n,o,l,s){t.normalize()
let f=[],a=document.createDocumentFragment()
l&&f.push(t.previousSibling)
let d=[]
return u(t.childNodes).some((function(t){if(t.tagName&&!t.hasChildNodes())return void d.push(t)
if(t.childNodes&&t.childNodes.length)return d.push(t),void f.push.apply(f,m(t,n,o,l,s))
let r=t.wholeText||"",u=r.trim()
u.length&&(" "===r[0]&&d.push(e(" ")),c(u.split(o),(function(t,e){e&&s&&d.push(i(a,"whitespace"," ",s))
let r=i(a,n,t)
f.push(r),d.push(r)}))," "===r[r.length-1]&&d.push(e(" ")))})),c(d,(function(t){r(a,t)})),t.innerHTML="",r(t,a),f}let g=0
let y="words",w=d(y,g,"word",(function(t){return m(t,"word",/\s+/,0,1)})),b="chars",N=d(b,[y],"char",(function(t,e,n){let r=[]
return c(n[y],(function(t,n){r.push.apply(r,m(t,"char","",e.whitespace&&n))})),r}))
function x(t){let e=(t=t||{}).key
return u(t.target||"[data-splitting]").map((function(r){let i=r["üçå"]
if(!t.force&&i)return i
i=r["üçå"]={el:r}
let u=t.by||o(r,"splitting")
u&&"true"!=u||(u=b)
let l=p(u),s=function(t,e){for(let n in e)t[n]=e[n]
return t}({},t)
return c(l,(function(t){if(t.split){let o=t.by,u=(e?"-"+e:"")+t.key,l=t.split(r,s,i)
u&&function(t,e,r){let i="--"+e,o=i+"-index"
c(r,(function(t,e){Array.isArray(t)?c(t,(function(t){n(t,o,e)})):n(t,o,e)})),n(t,i+"-total",r.length)}(r,u,l),i[o]=l,r.classList.add(o)}})),r.classList.add("splitting"),i}))}function T(t,e,n){let r=u(e.matching||t.children,t),i={}
return c(r,(function(t){let e=Math.round(t[n]);(i[e]||(i[e]=[])).push(t)})),Object.keys(i).map(Number).sort(L).map(s(i))}function L(t,e){return t-e}x.html=function(t){let e=(t=t||{}).target=i()
return e.innerHTML=t.content,x(t),e.outerHTML},x.add=h
let k=d("lines",[y],"line",(function(t,e,n){return T(t,{matching:n[y]},"offsetTop")})),A=d("items",g,"item",(function(t,e){return u(e.matching||t.children,t)})),C=d("rows",g,"row",(function(t,e){return T(t,e,"offsetTop")})),M=d("cols",g,"col",(function(t,e){return T(t,e,"offsetLeft")})),S=d("grid",["rows","cols"]),v="layout",H=d(v,g,g,(function(t,e){let l=e.rows=+(e.rows||o(t,"rows")||1),c=e.columns=+(e.columns||o(t,"columns")||1)
if(e.image=e.image||o(t,"image")||t.currentSrc||t.src,e.image){let n=u("img",t)[0]
e.image=n&&(n.currentSrc||n.src)}e.image&&n(t,"background-image","url("+e.image+")")
let s=l*c,f=[],a=i(g,"cell-grid")
for(;s--;){let t=i(a,"cell")
i(t,"cell-inner"),f.push(t)}return r(t,a),f})),O=d("cellRows",[v],"row",(function(t,e,n){let r=e.rows,i=l(r)
return c(n[v],(function(t,e,n){i[Math.floor(e/(n.length/r))].push(t)})),i})),j=d("cellColumns",[v],"col",(function(t,e,n){let r=e.columns,i=l(r)
return c(n[v],(function(t,e){i[e%r].push(t)})),i})),E=d("cells",["cellRows","cellColumns"],"cell",(function(t,e,n){return n[v]}))
return h(w),h(N),h(k),h(A),h(C),h(M),h(S),h(H),h(O),h(j),h(E),x}))
